import { PrismaService } from '../prisma/prisma.service';
import { PackagesService } from '../packages/packages.service';
import { VendorService } from '../vendor/vendor.service';
interface BulkOrderData {
    orders: Array<{
        playerId: string;
        identifier: string;
        packageCodes: string[];
        gameName: string;
    }>;
    placedBy: string;
}
interface UserOrderResult {
    playerId: string;
    identifier: string;
    gameName: string;
    success: boolean;
    packages: Array<{
        packageCode: string;
        packageName: string;
        price: number;
        success: boolean;
        error?: string;
    }>;
    totalCost: number;
    transactionId?: string;
    orderId?: string;
    error?: string;
}
interface BulkOrderResponse {
    success: boolean;
    results: UserOrderResult[];
    summary: {
        totalOrders: number;
        successfulOrders: number;
        failedOrders: number;
        totalCost: number;
        partialSuccessOrders: number;
    };
    message: string;
}
export declare class TransactionsService {
    private prisma;
    private packagesService;
    private vendorService;
    constructor(prisma: PrismaService, packagesService: PackagesService, vendorService: VendorService);
    findAll(filters?: {
        type?: string;
        status?: string;
        userRole?: string;
        search?: string;
        dateFrom?: string;
        dateTo?: string;
        skip?: number;
        take?: number;
        sortBy?: string;
        sortOrder?: 'asc' | 'desc';
    }): Promise<{
        transactions: ({
            user: {
                id: string;
                email: string;
                role: import(".prisma/client").$Enums.UserRole;
            };
        } & {
            id: string;
            status: import(".prisma/client").$Enums.TransactionStatus;
            createdAt: Date;
            updatedAt: Date;
            userId: string;
            type: import(".prisma/client").$Enums.TransactionType;
            packagePriceAtPurchase: number | null;
            packagePriceVersion: number | null;
            vendorRateAtPurchase: number | null;
            exchangeRateSnapshot: import("@prisma/client/runtime/library").JsonValue | null;
            xCoinAmount: number | null;
            totalCost: number | null;
            quantity: number;
            notes: string | null;
            adminNotes: string | null;
            gameUserId: string | null;
            serverId: string | null;
            playerName: string | null;
            region: string | null;
            fromCurrency: string | null;
            fromAmount: number | null;
            exchangeRate: number | null;
            processingFee: number | null;
            paymentMethod: string | null;
            paymentReference: string | null;
            requestedAmount: number | null;
            approvedAmount: number | null;
            paymentProof: string | null;
            externalPaymentRef: string | null;
            approvedBy: string | null;
            approvedAt: Date | null;
            rejectionReason: string | null;
            vendorName: string | null;
            vendorCurrency: string | null;
            vendorCoinAmount: number | null;
            vendorTransactionId: string | null;
            relatedTransactionId: string | null;
            specialPricing: boolean;
            priceType: string | null;
        })[];
        total: number;
        hasMore: boolean;
    }>;
    getTransactionStats(): Promise<{
        totalTransactions: number;
        completedTransactions: number;
        failedTransactions: number;
        processingTransactions: number;
        totalRevenue: number;
        todayTransactions: number;
        successRate: number;
    }>;
    updateTransactionStatus(id: string, status: string, adminNotes?: string): Promise<{
        id: string;
        status: import(".prisma/client").$Enums.TransactionStatus;
        createdAt: Date;
        updatedAt: Date;
        userId: string;
        type: import(".prisma/client").$Enums.TransactionType;
        packagePriceAtPurchase: number | null;
        packagePriceVersion: number | null;
        vendorRateAtPurchase: number | null;
        exchangeRateSnapshot: import("@prisma/client/runtime/library").JsonValue | null;
        xCoinAmount: number | null;
        totalCost: number | null;
        quantity: number;
        notes: string | null;
        adminNotes: string | null;
        gameUserId: string | null;
        serverId: string | null;
        playerName: string | null;
        region: string | null;
        fromCurrency: string | null;
        fromAmount: number | null;
        exchangeRate: number | null;
        processingFee: number | null;
        paymentMethod: string | null;
        paymentReference: string | null;
        requestedAmount: number | null;
        approvedAmount: number | null;
        paymentProof: string | null;
        externalPaymentRef: string | null;
        approvedBy: string | null;
        approvedAt: Date | null;
        rejectionReason: string | null;
        vendorName: string | null;
        vendorCurrency: string | null;
        vendorCoinAmount: number | null;
        vendorTransactionId: string | null;
        relatedTransactionId: string | null;
        specialPricing: boolean;
        priceType: string | null;
    }>;
    processBulkOrder(bulkOrderData: BulkOrderData): Promise<BulkOrderResponse>;
    private processUserOrder;
    private processPackage;
    createOrder(orderData: {
        packageId: string;
        playerId: string;
        identifier: string;
        packageCode: string;
        gameName: string;
        userId: string;
        playerDetails: {
            playerId: string;
            identifier: string;
            game: string;
        };
    }): Promise<{
        success: boolean;
        order: {
            id: string;
            status: string;
            amount: number;
            packageName: string;
            playerId: string;
            createdAt: Date;
        };
        orderId: string;
        message: string;
    }>;
    findById(id: string): Promise<{
        id: string;
        status: import(".prisma/client").$Enums.PackageStatus;
        createdAt: Date;
        updatedAt: Date;
        name: string;
        type: import(".prisma/client").$Enums.PackageType;
        region: string;
        vendorCurrency: string;
        vendorPackageCode: string;
        currency: string;
        description: string | null;
        amount: number | null;
        resellKeyword: string | null;
        price: number;
        imageUrl: string | null;
        gameId: string;
        featured: boolean;
        discount: number | null;
        packageStatus: number;
        baseVendorCost: number;
        duration: number | null;
        gameName: string;
        vendor: string;
        vendorPrice: number;
        stock: number | null;
        isPriceLocked: boolean;
        markupId: string | null;
        basePrice: number | null;
        markupPercent: number;
        roundToNearest: number;
        lockedPrice: number | null;
        lastPriceUpdate: Date | null;
        priceVersion: number;
        markupAppliedAt: Date | null;
    }[]>;
    createTransaction(userId: string, packageId: string, quantity?: number): Promise<{
        id: string;
        status: import(".prisma/client").$Enums.TransactionStatus;
        createdAt: Date;
        updatedAt: Date;
        userId: string;
        type: import(".prisma/client").$Enums.TransactionType;
        packagePriceAtPurchase: number | null;
        packagePriceVersion: number | null;
        vendorRateAtPurchase: number | null;
        exchangeRateSnapshot: import("@prisma/client/runtime/library").JsonValue | null;
        xCoinAmount: number | null;
        totalCost: number | null;
        quantity: number;
        notes: string | null;
        adminNotes: string | null;
        gameUserId: string | null;
        serverId: string | null;
        playerName: string | null;
        region: string | null;
        fromCurrency: string | null;
        fromAmount: number | null;
        exchangeRate: number | null;
        processingFee: number | null;
        paymentMethod: string | null;
        paymentReference: string | null;
        requestedAmount: number | null;
        approvedAmount: number | null;
        paymentProof: string | null;
        externalPaymentRef: string | null;
        approvedBy: string | null;
        approvedAt: Date | null;
        rejectionReason: string | null;
        vendorName: string | null;
        vendorCurrency: string | null;
        vendorCoinAmount: number | null;
        vendorTransactionId: string | null;
        relatedTransactionId: string | null;
        specialPricing: boolean;
        priceType: string | null;
    }>;
}
export {};
